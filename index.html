let panier = JSON.parse(localStorage.getItem('panier')) || {};

function ajouterPanier(produit){
  if(panier[produit]) panier[produit] +=1;
  else panier[produit] =1;
  localStorage.setItem('panier', JSON.stringify(panier));
  afficherResumePanier();
}

function afficherResumePanier(){
  panier = JSON.parse(localStorage.getItem('panier')) || {};
  let resume = [];
  let count = 0;
  for(let produit in panier){
    if(count < 3){ // Affiche max 3 produits
      resume.push(panier[produit]+" "+produit);
      count++;
    }
  }
  if(Object.keys(panier).length > 3) resume.push('...');
  document.getElementById('resumePanier').innerText = resume.join(', ');
}

// Met à jour en continu si panier est modifié sur autre page
afficherResumePanier();
setInterval(afficherResumePanier, 1000);
